(this["webpackJsonp43-react-jobly"]=this["webpackJsonp43-react-jobly"]||[]).push([[0],{155:function(e,t,n){},174:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},184:function(e,t){},186:function(e,t){},200:function(e,t){},202:function(e,t){},230:function(e,t){},232:function(e,t){},233:function(e,t){},238:function(e,t){},240:function(e,t){},259:function(e,t){},271:function(e,t){},274:function(e,t){},291:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(143),s=n.n(c),i=n(149),u=n(2),o=n.n(u),l=n(5),j=n(6),b=n(8),p=a.a.createContext(),h=n(7),d=(n(155),n(0)),f=function(e){var t=e.id,n=e.title,a=e.salary,c=e.equity,s=e.companyName,i=Object(r.useContext)(p),u=i.hasAppliedToJob,b=i.applyToJob,h=Object(r.useState)(),f=Object(j.a)(h,2),O=f[0],m=f[1];Object(r.useEffect)((function(){m(u(t))}),[t,u]);var x=function(){var e=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u(t)){e.next=2;break}return e.abrupt("return");case 2:b(t),m(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"JobCard",children:[Object(d.jsx)("h4",{children:n}),Object(d.jsx)("p",{children:s}),a&&Object(d.jsxs)("p",{children:["Salary: ",a.toLocaleString()]}),c&&Object(d.jsxs)("p",{children:["Equity: ",c]}),Object(d.jsx)("button",{onClick:x,disabled:O,children:O?"Applied":"Apply"})]})},O=function(e){var t=e.jobs;e.apply;return Object(d.jsx)("div",{className:"JobList",children:t.map((function(e){return Object(d.jsx)(f,{id:e.id,title:e.title,salary:e.salary,equity:e.equity,comapnyName:e.companyName},e.id)}))})},m=n(144),x=n(145),v=n(146),g=n.n(v),y="https://lae-jobly-backend.herokuapp.com",w=function(){function e(){Object(m.a)(this,e)}return Object(x.a)(e,null,[{key:"request",value:function(){var t=Object(l.a)(o.a.mark((function t(n){var r,a,c,s,i,u,l=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2&&void 0!==l[2]?l[2]:"get",console.debug("API Call:",n,r,a),c="".concat(y,"/").concat(n),s={Authorization:"Bearer ".concat(e.token)},i="get"===a?r:{},t.prev=6,t.next=9,g()({url:c,method:a,data:r,params:i,headers:s});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.response),u=t.t0.response.data.error.message,alert(u),Array.isArray(u)?u:[u];case 18:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getCompany",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("companies/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.company);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompanies",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("companies",{name:t});case 2:return n=e.sent,e.abrupt("return",n.companies);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getJobs",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("jobs",{title:t});case 2:return n=e.sent,e.abrupt("return",n.jobs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveUser",value:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),n,"patch");case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/token",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyToJob",value:function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t,"/jobs/").concat(n),{},"post");case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),N=(n(174),function(e){var t=e.search,n=Object(r.useState)(""),a=Object(j.a)(n,2),c=a[0],s=a[1];return Object(d.jsx)("div",{className:"Search",children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(c.trim()||void 0),s(c.trim())},children:[Object(d.jsx)("input",{placeholder:"Search",name:"search",value:c,onChange:function(e){s(e.target.value)}}),Object(d.jsx)("button",{type:"submit",children:"Submit"})]})})}),k=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(j.a)(c,2),i=s[0],u=s[1],b=Object(r.useContext)(p).appliedJobs,h=Object(r.useState)(!1),f=Object(j.a)(h,2),m=f[0],x=f[1];Object(r.useEffect)((function(){v()}),[]);var v=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getJobs(t);case 2:n=e.sent,a(n),u(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!n)return Object(d.jsx)("p",{className:"centerp",children:"Loading..."});return Object(d.jsxs)("div",{className:"Jobs",children:[Object(d.jsx)(N,{search:v}),Object(d.jsxs)("p",{className:"centerp",children:["Filter applied jobs:",m?Object(d.jsx)("span",{onClick:function(){a(i),x(!1)},checked:!0,className:"Jobs-on",children:"ON"}):Object(d.jsx)("span",{onClick:function(){var e=n.filter((function(e){var t=e.id;return b.has(t)}));a(e),x(!0)},className:"Jobs-off",children:"OFF"})]}),n.length?Object(d.jsx)(O,{jobs:n}):Object(d.jsx)("p",{className:"centerp",children:"Sorry, no result found"})]})},S=n(23),C=n(19),F=(n(84),function(e){var t=e.login,n=Object(r.useState)({username:"",password:""}),a=Object(j.a)(n,2),c=a[0],s=a[1],i=Object(h.g)(),u=function(e){var t=e.target,n=t.name,r=t.value;s((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(S.a)({},n,r))}))},b=function(){var e=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(c);case 3:e.sent.success&&i.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"LoginForm",children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsxs)("form",{className:"LoginForm-form",onSubmit:b,children:[Object(d.jsx)("label",{htmlFor:"username",children:"Username"}),Object(d.jsx)("input",{name:"username",value:c.username,onChange:u,required:!0}),Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",value:c.password,onChange:u,required:!0}),Object(d.jsx)("button",{type:"submit",children:"Submit"})]})]})}),J=function(e){var t=e.signup,n=Object(r.useState)({username:"",password:"",firstName:"",lastName:"",email:""}),a=Object(j.a)(n,2),c=a[0],s=a[1],i=Object(h.g)(),u=function(e){var t=e.target,n=t.name,r=t.value;s((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(S.a)({},n,r))}))},b=function(){var e=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(c);case 3:e.sent.success&&i.push("/companies");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"SignupForm",children:[Object(d.jsx)("h1",{children:"Signup"}),Object(d.jsxs)("form",{className:"SignupForm-form",onSubmit:b,children:[Object(d.jsx)("label",{htmlFor:"username",children:"Username"}),Object(d.jsx)("input",{name:"username",value:c.username,onChange:u,required:!0}),Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",value:c.password,onChange:u,required:!0}),Object(d.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(d.jsx)("input",{type:"firstName",name:"firstName",value:c.firstName,onChange:u,required:!0}),Object(d.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(d.jsx)("input",{type:"lastName",name:"lastName",value:c.lastName,onChange:u,required:!0}),Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",value:c.email,onChange:u,required:!0}),Object(d.jsx)("button",{onSubmit:b,children:"Signup"})]})]})},q=function(){var e=Object(r.useContext)(p),t=e.curUser,n=e.setCurUser,a=Object(r.useState)({email:t.email,firstName:t.firstName,lastName:t.lastName,password:""}),c=Object(j.a)(a,2),s=c[0],i=c[1],u=Object(r.useState)(!1),b=Object(j.a)(u,2),h=b[0],f=b[1],O=function(e){var t=e.target,n=t.name,r=t.value;i((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(S.a)({},n,r))}))},m=function(){var e=Object(l.a)(o.a.mark((function e(r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),f(!1),e.prev=2,e.next=5,w.saveUser(t.username,s);case 5:a=e.sent,f(!0),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return");case 12:i((function(e){return Object(C.a)(Object(C.a)({},e),{},{password:""})})),n(a);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"ProfileForm",children:[Object(d.jsxs)("h1",{children:[t.username,"(s) profile"]}),Object(d.jsxs)("form",{className:"ProfileForm-form",onSubmit:m,children:[Object(d.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(d.jsx)("input",{type:"firstName",name:"firstName",value:s.firstName,onChange:O}),Object(d.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(d.jsx)("input",{type:"lastName",name:"lastName",value:s.lastName,onChange:O}),Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",value:s.email,onChange:O}),Object(d.jsx)("label",{htmlFor:"password",children:"Confirm password to make changes"}),Object(d.jsx)("input",{type:"password",name:"password",value:s.password,onChange:O}),h?Object(d.jsx)("button",{onSubmit:m,className:"saved-btn",children:"Changes Saved!"}):Object(d.jsx)("button",{onSubmit:m,children:"Save Changes"})]})]})},L=(n(179),function(){var e=Object(r.useContext)(p).curUser;return Object(d.jsxs)("div",{className:"HomePage",children:[Object(d.jsx)("h1",{children:"Jobly"}),Object(d.jsx)("h3",{children:"All the jobs in one, convenient place."}),e?Object(d.jsxs)("h2",{children:["Welcome back, ",e.firstName||e.username,"!"]}):Object(d.jsxs)("div",{children:[Object(d.jsx)(b.b,{to:"/login",children:Object(d.jsx)("button",{children:"Login"})}),Object(d.jsx)(b.b,{to:"/Signup",children:Object(d.jsx)("button",{children:"Signup"})})]})]})}),U=(n(51),function(e){var t=e.name,n=e.description,r=e.logoUrl,a=e.handle;return Object(d.jsx)(b.b,{className:"CompanyCard",to:"/companies/".concat(a),children:Object(d.jsxs)("div",{className:"CompanyCard-card",children:[Object(d.jsx)("h4",{children:t}),r&&Object(d.jsx)("img",{src:r,alt:t}),Object(d.jsx)("p",{children:n})]})})}),A=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){c()}),[]);var c=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getCompanies(t);case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(d.jsxs)("div",{className:"CompanyList",children:[Object(d.jsx)(N,{search:c}),n.length?Object(d.jsx)("div",{className:"CompanyList-list",children:n.map((function(e){return Object(d.jsx)(U,{handle:e.handle,name:e.name,description:e.description,logoUrl:e.logoUrl},e.handle)}))}):Object(d.jsx)("p",{className:"centerp",children:"Sorry, no results found."})]}):Object(d.jsx)("p",{className:"centerp",children:"Loading..."})},E=function(){var e=Object(h.h)().handle,t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){function t(){return(t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c,t.next=3,w.getCompany(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),a?Object(d.jsxs)("div",{className:"CompanyDetail",children:[Object(d.jsx)("h2",{children:a.name}),Object(d.jsx)("p",{children:a.description}),Object(d.jsx)(O,{jobs:a.jobs})]}):Object(d.jsx)("p",{children:"Loading..."})},P=function(e){var t=e.exact,n=e.path,a=e.children;return Object(r.useContext)(p).curUser?Object(d.jsx)(h.b,{exact:t,path:n,children:a}):Object(d.jsx)(h.a,{to:"/login"})},T=function(e){var t=e.signup,n=e.login;return Object(d.jsx)("div",{children:Object(d.jsx)("main",{children:Object(d.jsxs)(h.d,{children:[Object(d.jsx)(h.b,{exact:!0,path:"/",children:Object(d.jsx)(L,{})}),Object(d.jsx)(P,{exact:!0,path:"/companies",children:Object(d.jsx)(A,{})}),Object(d.jsx)(P,{exact:!0,path:"/companies/:handle",children:Object(d.jsx)(E,{})}),Object(d.jsx)(P,{exact:!0,path:"/jobs",children:Object(d.jsx)(k,{})}),Object(d.jsx)(h.b,{exact:!0,path:"/login",children:Object(d.jsx)(F,{login:n})}),Object(d.jsx)(h.b,{exact:!0,path:"/signup",children:Object(d.jsx)(J,{signup:t})}),Object(d.jsx)(P,{exact:!0,path:"/profile",children:Object(d.jsx)(q,{})}),Object(d.jsx)(h.a,{to:"/"})]})})})},I=(n(180),function(e){var t=e.logout,n=Object(r.useContext)(p).curUser;return Object(d.jsx)(d.Fragment,{children:n?Object(d.jsxs)("div",{className:"Navigation",children:[Object(d.jsx)(b.c,{exact:!0,to:"/",children:Object(d.jsx)("span",{children:"Jobly"})}),Object(d.jsx)(b.c,{exact:!0,to:"/companies",children:Object(d.jsx)("span",{children:"Companies"})}),Object(d.jsx)(b.c,{exact:!0,to:"/jobs",children:Object(d.jsx)("span",{children:"Jobs"})}),Object(d.jsx)(b.c,{exact:!0,to:"/profile",children:Object(d.jsx)("span",{children:"Profile"})}),Object(d.jsx)(b.b,{to:"/",onClick:t,children:"Logout"})]}):Object(d.jsxs)("div",{className:"Navigation",children:[Object(d.jsx)(b.c,{exact:!0,to:"/",children:Object(d.jsx)("span",{children:"Jobly"})}),Object(d.jsx)(b.c,{exact:!0,to:"/login",children:Object(d.jsx)("span",{children:"Login"})}),Object(d.jsx)(b.c,{exact:!0,to:"/signup",children:Object(d.jsx)("span",{children:"Signup"})})]})})}),D=n(148),B=n.n(D),z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,a=Object(r.useState)(n),c=Object(j.a)(a,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){null===s?localStorage.removeItem(e):localStorage.setItem(e,s)}),[e,s]),[s,i]};var H=function(){var e=z("jobly-token"),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(j.a)(c,2),u=s[0],h=s[1],f=Object(r.useState)(new Set([])),O=Object(j.a)(f,2),m=O[0],x=O[1],v=Object(r.useState)(!1),g=Object(j.a)(v,2),y=g[0],N=g[1];Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return e.prev=1,t=B.a.decode(n),r=t.username,w.token=n,e.next=6,w.getUser(r);case 6:a=e.sent,h(a),x(new Set(a.applications)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),h(null);case 14:N(!0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}N(!1),function(){e.apply(this,arguments)}()}),[n]);var k=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.login(t);case 3:return n=e.sent,a(n),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.signup(t);case 3:return n=e.sent,a(n),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){return m.has(e)};return y?Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(b.a,{children:Object(d.jsxs)(p.Provider,{value:{curUser:u,hasAppliedToJob:C,applyToJob:function(e){C(e)||(w.applyToJob(u.username,e),x(new Set([].concat(Object(i.a)(m),[e]))))},setCurUser:h,appliedJobs:m},children:[Object(d.jsx)(I,{logout:function(){h(null),a(null)}}),Object(d.jsx)(T,{login:k,signup:S})]})})}):Object(d.jsx)("p",{className:"centerp",children:"Loading..."})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,292)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(H,{})}),document.getElementById("root")),M()},51:function(e,t,n){},84:function(e,t,n){}},[[291,1,2]]]);
//# sourceMappingURL=main.7a482b95.chunk.js.map